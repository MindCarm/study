#===============================================================================
# target definition
#===============================================================================

build	:	build_$(TARGET_TYPE)

new		:	clean build

clean	:
	@echo
	@echo ---------------------------------------------------------------------
	@echo Cleaning-up......
	@echo ---------------------------------------------------------------------
	$(RM) *.o *.a *.test core core.* $(TARGET) $(CLASS:=.test)
	@echo ---------------------------------------------------------------------
	@echo ORACLE Pro*C and Altibase Apre*C precompiled files Cleaning-up......
	@echo ---------------------------------------------------------------------
	for name in $(SRC); do \
		if [ -f "$$name.pc" ]; then $(RM) $$name.cpp $$name.lis tp*; fi \
	done
	for name in $(SRC); do \
		if [ -f "$$name.sc" ]; then $(RM) $$name.cpp $$name.lis; fi \
	done

install	:	install_$(TARGET_TYPE)


build_executable	:	$(OBJS)
	@echo
	@echo ---------------------------------------------------------------------
	@echo $(TARGET) Linking......build_executable
	@echo ---------------------------------------------------------------------
	$(CXX) -o $(TARGET) $(OBJS) $(MY_LDFLAGS)

build_dlibrary		:	$(OBJS)
	@echo
	@echo ---------------------------------------------------------------------
	@echo $(TARGET) Linking......build_dlibrary
	@echo ---------------------------------------------------------------------
#	$(CXX) -bM:SRE -o $(TARGET) $(OBJS) $(MY_LDFLAGS)
#	$(CXX) -bdynamic -G -o $(TARGET) $(OBJS) $(MY_LDFLAGS)
	$(CXX) -shared -o $(TARGET) $(OBJS) $(MY_LDFLAGS) 

#===============================================================================
# SUFFIX rule definition
#===============================================================================

.SUFFIXES	:	.o .cpp .sc

.cpp.o	:
	@echo
	@echo ---------------------------------------------------------------------
	@echo $< Compiling......
	@echo ---------------------------------------------------------------------
	$(CXX) -c $< $(MY_CXXFLAGS)

.sc.cpp	:
	@echo ---------------------------------------------------------------------
	@echo $< Apre*C Compiling......
	@echo ---------------------------------------------------------------------
	$(APRE) $(APRE_CFLAGS) $<

.sc.o	:
	@echo ---------------------------------------------------------------------
	@echo $< Apre*C Compiling......
	@echo ---------------------------------------------------------------------
	$(APRE) $(APRE_CFLAGS) $<
	@echo ---------------------------------------------------------------------
	@echo $*.cpp Compiling......
	@echo ---------------------------------------------------------------------
	$(CXX) -c $*.cpp $(MY_CXXFLAGS)

################################################################################
# END of file
################################################################################